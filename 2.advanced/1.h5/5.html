<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>四.逐帧动画 | html学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/web-html/home.png">
    <link rel="manifest" href="/web-html/manifest.json">
    <script src="/web-html/dll/vendor.dll.js"></script>
    <script src="https://webapi.amap.com/maps?v=2.0&amp;key=46c9ed4e2d25a0e0ee7c883fd5b1a0c8"></script>
    <script src="https://webapi.amap.com/ui/1.1/main.js?v=1.1.1"></script>
    <meta name="description" content="风浪没平息 我宣告奔跑的意义">
    
    <link rel="preload" href="/web-html/assets/css/0.styles.be4d0a8b.css" as="style"><link rel="preload" href="/web-html/assets/js/app.1a892b65.js" as="script"><link rel="preload" href="/web-html/assets/js/3.cc719f0c.js" as="script"><link rel="preload" href="/web-html/assets/js/83.d5a8006f.js" as="script"><link rel="preload" href="/web-html/assets/js/6.f0aa3d22.js" as="script"><link rel="prefetch" href="/web-html/assets/js/10.32460d66.js"><link rel="prefetch" href="/web-html/assets/js/100.5f186c6a.js"><link rel="prefetch" href="/web-html/assets/js/101.4b78db23.js"><link rel="prefetch" href="/web-html/assets/js/102.e9a1d44a.js"><link rel="prefetch" href="/web-html/assets/js/103.26dd1ae6.js"><link rel="prefetch" href="/web-html/assets/js/104.13345529.js"><link rel="prefetch" href="/web-html/assets/js/105.9bfc7129.js"><link rel="prefetch" href="/web-html/assets/js/106.e9b7e0e9.js"><link rel="prefetch" href="/web-html/assets/js/107.9b6220d7.js"><link rel="prefetch" href="/web-html/assets/js/108.e8b9b055.js"><link rel="prefetch" href="/web-html/assets/js/109.b12af117.js"><link rel="prefetch" href="/web-html/assets/js/11.5a105eef.js"><link rel="prefetch" href="/web-html/assets/js/110.c99efb3c.js"><link rel="prefetch" href="/web-html/assets/js/111.f153ff99.js"><link rel="prefetch" href="/web-html/assets/js/112.3933d801.js"><link rel="prefetch" href="/web-html/assets/js/113.8959dc2f.js"><link rel="prefetch" href="/web-html/assets/js/114.c4486c75.js"><link rel="prefetch" href="/web-html/assets/js/115.3e6f589f.js"><link rel="prefetch" href="/web-html/assets/js/116.fd2ef12e.js"><link rel="prefetch" href="/web-html/assets/js/117.51ebd011.js"><link rel="prefetch" href="/web-html/assets/js/118.e79e6f60.js"><link rel="prefetch" href="/web-html/assets/js/119.f6201ec4.js"><link rel="prefetch" href="/web-html/assets/js/12.e7d06f06.js"><link rel="prefetch" href="/web-html/assets/js/120.af2adea4.js"><link rel="prefetch" href="/web-html/assets/js/121.804b987d.js"><link rel="prefetch" href="/web-html/assets/js/122.7a95778b.js"><link rel="prefetch" href="/web-html/assets/js/123.0cf36b8b.js"><link rel="prefetch" href="/web-html/assets/js/124.de618e75.js"><link rel="prefetch" href="/web-html/assets/js/125.afb94db5.js"><link rel="prefetch" href="/web-html/assets/js/126.58f15a20.js"><link rel="prefetch" href="/web-html/assets/js/127.39d3f4c3.js"><link rel="prefetch" href="/web-html/assets/js/128.afd90b6f.js"><link rel="prefetch" href="/web-html/assets/js/129.42d6c81c.js"><link rel="prefetch" href="/web-html/assets/js/13.1fffee79.js"><link rel="prefetch" href="/web-html/assets/js/130.c294bfc3.js"><link rel="prefetch" href="/web-html/assets/js/131.be3dbd29.js"><link rel="prefetch" href="/web-html/assets/js/132.7bccad81.js"><link rel="prefetch" href="/web-html/assets/js/133.30b84590.js"><link rel="prefetch" href="/web-html/assets/js/134.074808fc.js"><link rel="prefetch" href="/web-html/assets/js/135.b10e67ee.js"><link rel="prefetch" href="/web-html/assets/js/136.9e23583c.js"><link rel="prefetch" href="/web-html/assets/js/137.84e862f4.js"><link rel="prefetch" href="/web-html/assets/js/138.c64ec3ec.js"><link rel="prefetch" href="/web-html/assets/js/139.8c5ca492.js"><link rel="prefetch" href="/web-html/assets/js/14.45903ced.js"><link rel="prefetch" href="/web-html/assets/js/140.b86d24de.js"><link rel="prefetch" href="/web-html/assets/js/141.516f4c22.js"><link rel="prefetch" href="/web-html/assets/js/142.37cd8b79.js"><link rel="prefetch" href="/web-html/assets/js/143.adfd67f8.js"><link rel="prefetch" href="/web-html/assets/js/144.59789bc7.js"><link rel="prefetch" href="/web-html/assets/js/145.dfcfbc98.js"><link rel="prefetch" href="/web-html/assets/js/146.af3c8b53.js"><link rel="prefetch" href="/web-html/assets/js/147.0b03d587.js"><link rel="prefetch" href="/web-html/assets/js/148.61cf8a10.js"><link rel="prefetch" href="/web-html/assets/js/149.933554b6.js"><link rel="prefetch" href="/web-html/assets/js/15.c9b49a0f.js"><link rel="prefetch" href="/web-html/assets/js/150.8221dd0a.js"><link rel="prefetch" href="/web-html/assets/js/151.4a8b4db5.js"><link rel="prefetch" href="/web-html/assets/js/152.606488cd.js"><link rel="prefetch" href="/web-html/assets/js/153.c445cf10.js"><link rel="prefetch" href="/web-html/assets/js/154.a4e7af49.js"><link rel="prefetch" href="/web-html/assets/js/155.c9bf107f.js"><link rel="prefetch" href="/web-html/assets/js/156.a4f8a65d.js"><link rel="prefetch" href="/web-html/assets/js/157.26ca668d.js"><link rel="prefetch" href="/web-html/assets/js/158.f7a41c3f.js"><link rel="prefetch" href="/web-html/assets/js/159.78a24bf1.js"><link rel="prefetch" href="/web-html/assets/js/16.91df6439.js"><link rel="prefetch" href="/web-html/assets/js/160.87891324.js"><link rel="prefetch" href="/web-html/assets/js/161.b8437687.js"><link rel="prefetch" href="/web-html/assets/js/162.980c87fc.js"><link rel="prefetch" href="/web-html/assets/js/163.3100ff11.js"><link rel="prefetch" href="/web-html/assets/js/164.f4562cae.js"><link rel="prefetch" href="/web-html/assets/js/165.c0482b75.js"><link rel="prefetch" href="/web-html/assets/js/166.2ec06c3d.js"><link rel="prefetch" href="/web-html/assets/js/167.23bc768c.js"><link rel="prefetch" href="/web-html/assets/js/168.45aed36d.js"><link rel="prefetch" href="/web-html/assets/js/169.3785483d.js"><link rel="prefetch" href="/web-html/assets/js/17.1d521340.js"><link rel="prefetch" href="/web-html/assets/js/170.688f2db0.js"><link rel="prefetch" href="/web-html/assets/js/171.79df4a0a.js"><link rel="prefetch" href="/web-html/assets/js/172.d7bc710e.js"><link rel="prefetch" href="/web-html/assets/js/173.4bab4d5d.js"><link rel="prefetch" href="/web-html/assets/js/174.26ef61eb.js"><link rel="prefetch" href="/web-html/assets/js/175.55688d4c.js"><link rel="prefetch" href="/web-html/assets/js/176.317c4acb.js"><link rel="prefetch" href="/web-html/assets/js/177.6c01305e.js"><link rel="prefetch" href="/web-html/assets/js/178.a87b96c0.js"><link rel="prefetch" href="/web-html/assets/js/179.903ebf16.js"><link rel="prefetch" href="/web-html/assets/js/18.1a179f09.js"><link rel="prefetch" href="/web-html/assets/js/180.bec75c08.js"><link rel="prefetch" href="/web-html/assets/js/181.5c8485ed.js"><link rel="prefetch" href="/web-html/assets/js/182.a0bf4d44.js"><link rel="prefetch" href="/web-html/assets/js/183.2dbaec02.js"><link rel="prefetch" href="/web-html/assets/js/184.73849204.js"><link rel="prefetch" href="/web-html/assets/js/185.01e4c186.js"><link rel="prefetch" href="/web-html/assets/js/186.e526ff48.js"><link rel="prefetch" href="/web-html/assets/js/187.59167138.js"><link rel="prefetch" href="/web-html/assets/js/188.7f54e348.js"><link rel="prefetch" href="/web-html/assets/js/189.f5389ef6.js"><link rel="prefetch" href="/web-html/assets/js/19.dc411c97.js"><link rel="prefetch" href="/web-html/assets/js/190.30050e81.js"><link rel="prefetch" href="/web-html/assets/js/191.257c75ef.js"><link rel="prefetch" href="/web-html/assets/js/192.e2765b42.js"><link rel="prefetch" href="/web-html/assets/js/193.6eae1574.js"><link rel="prefetch" href="/web-html/assets/js/194.e5a12892.js"><link rel="prefetch" href="/web-html/assets/js/195.b5b6b505.js"><link rel="prefetch" href="/web-html/assets/js/196.582cce90.js"><link rel="prefetch" href="/web-html/assets/js/197.b9737508.js"><link rel="prefetch" href="/web-html/assets/js/198.28dd1ff6.js"><link rel="prefetch" href="/web-html/assets/js/199.e461dc88.js"><link rel="prefetch" href="/web-html/assets/js/20.bb1e606e.js"><link rel="prefetch" href="/web-html/assets/js/200.87025a42.js"><link rel="prefetch" href="/web-html/assets/js/201.91544b5c.js"><link rel="prefetch" href="/web-html/assets/js/202.cd3fd925.js"><link rel="prefetch" href="/web-html/assets/js/203.e98986f2.js"><link rel="prefetch" href="/web-html/assets/js/204.4362b3d2.js"><link rel="prefetch" href="/web-html/assets/js/205.f74c7c71.js"><link rel="prefetch" href="/web-html/assets/js/206.a2fec937.js"><link rel="prefetch" href="/web-html/assets/js/207.be38f706.js"><link rel="prefetch" href="/web-html/assets/js/208.20f479ef.js"><link rel="prefetch" href="/web-html/assets/js/209.3fd2111c.js"><link rel="prefetch" href="/web-html/assets/js/21.43000dbe.js"><link rel="prefetch" href="/web-html/assets/js/22.1774046e.js"><link rel="prefetch" href="/web-html/assets/js/23.6704730c.js"><link rel="prefetch" href="/web-html/assets/js/24.953a1f1a.js"><link rel="prefetch" href="/web-html/assets/js/25.ba48c152.js"><link rel="prefetch" href="/web-html/assets/js/26.b3edead9.js"><link rel="prefetch" href="/web-html/assets/js/27.20387301.js"><link rel="prefetch" href="/web-html/assets/js/28.7a8e0ae7.js"><link rel="prefetch" href="/web-html/assets/js/29.445a9130.js"><link rel="prefetch" href="/web-html/assets/js/30.9777f8b5.js"><link rel="prefetch" href="/web-html/assets/js/31.a71ec6b0.js"><link rel="prefetch" href="/web-html/assets/js/32.427a4b96.js"><link rel="prefetch" href="/web-html/assets/js/33.085c0f9a.js"><link rel="prefetch" href="/web-html/assets/js/34.96dcd330.js"><link rel="prefetch" href="/web-html/assets/js/35.8d82091c.js"><link rel="prefetch" href="/web-html/assets/js/36.ddec8d44.js"><link rel="prefetch" href="/web-html/assets/js/37.d16c0381.js"><link rel="prefetch" href="/web-html/assets/js/38.0d1ba51e.js"><link rel="prefetch" href="/web-html/assets/js/39.985b35db.js"><link rel="prefetch" href="/web-html/assets/js/4.59a8c29e.js"><link rel="prefetch" href="/web-html/assets/js/40.a45dbeae.js"><link rel="prefetch" href="/web-html/assets/js/41.f4978b59.js"><link rel="prefetch" href="/web-html/assets/js/42.88460fa3.js"><link rel="prefetch" href="/web-html/assets/js/43.02238db9.js"><link rel="prefetch" href="/web-html/assets/js/44.2a8e0547.js"><link rel="prefetch" href="/web-html/assets/js/45.3259d9a1.js"><link rel="prefetch" href="/web-html/assets/js/46.5eead335.js"><link rel="prefetch" href="/web-html/assets/js/47.250113ce.js"><link rel="prefetch" href="/web-html/assets/js/48.32f7ac15.js"><link rel="prefetch" href="/web-html/assets/js/49.cf4c69e5.js"><link rel="prefetch" href="/web-html/assets/js/5.ceebd4e3.js"><link rel="prefetch" href="/web-html/assets/js/50.9470da9a.js"><link rel="prefetch" href="/web-html/assets/js/51.67a31412.js"><link rel="prefetch" href="/web-html/assets/js/52.2a671001.js"><link rel="prefetch" href="/web-html/assets/js/53.194734fb.js"><link rel="prefetch" href="/web-html/assets/js/54.ff38f4d3.js"><link rel="prefetch" href="/web-html/assets/js/55.e813c542.js"><link rel="prefetch" href="/web-html/assets/js/56.96cb9cbc.js"><link rel="prefetch" href="/web-html/assets/js/57.2322c8ee.js"><link rel="prefetch" href="/web-html/assets/js/58.65b3e359.js"><link rel="prefetch" href="/web-html/assets/js/59.e1a053b8.js"><link rel="prefetch" href="/web-html/assets/js/60.6baa1e32.js"><link rel="prefetch" href="/web-html/assets/js/61.182f4711.js"><link rel="prefetch" href="/web-html/assets/js/62.67638b73.js"><link rel="prefetch" href="/web-html/assets/js/63.b01a91f1.js"><link rel="prefetch" href="/web-html/assets/js/64.87d90004.js"><link rel="prefetch" href="/web-html/assets/js/65.e56c4751.js"><link rel="prefetch" href="/web-html/assets/js/66.d6d57f99.js"><link rel="prefetch" href="/web-html/assets/js/67.3c919860.js"><link rel="prefetch" href="/web-html/assets/js/68.960a348e.js"><link rel="prefetch" href="/web-html/assets/js/69.b4d453d5.js"><link rel="prefetch" href="/web-html/assets/js/7.09a56a60.js"><link rel="prefetch" href="/web-html/assets/js/70.be1abbd9.js"><link rel="prefetch" href="/web-html/assets/js/71.6cb44cff.js"><link rel="prefetch" href="/web-html/assets/js/72.33942a31.js"><link rel="prefetch" href="/web-html/assets/js/73.c87798e8.js"><link rel="prefetch" href="/web-html/assets/js/74.328ee4b4.js"><link rel="prefetch" href="/web-html/assets/js/75.f5acd8d8.js"><link rel="prefetch" href="/web-html/assets/js/76.f77836b2.js"><link rel="prefetch" href="/web-html/assets/js/77.dadb2bdd.js"><link rel="prefetch" href="/web-html/assets/js/78.dd5f79cf.js"><link rel="prefetch" href="/web-html/assets/js/79.6940b0ae.js"><link rel="prefetch" href="/web-html/assets/js/8.6591274e.js"><link rel="prefetch" href="/web-html/assets/js/80.9731e93c.js"><link rel="prefetch" href="/web-html/assets/js/81.541a433e.js"><link rel="prefetch" href="/web-html/assets/js/82.99891a15.js"><link rel="prefetch" href="/web-html/assets/js/84.03491368.js"><link rel="prefetch" href="/web-html/assets/js/85.1091c3b4.js"><link rel="prefetch" href="/web-html/assets/js/86.aea2b2a3.js"><link rel="prefetch" href="/web-html/assets/js/87.91f4a82d.js"><link rel="prefetch" href="/web-html/assets/js/88.e5245f17.js"><link rel="prefetch" href="/web-html/assets/js/89.ab44fe91.js"><link rel="prefetch" href="/web-html/assets/js/9.b1fdfd0d.js"><link rel="prefetch" href="/web-html/assets/js/90.28fdf92d.js"><link rel="prefetch" href="/web-html/assets/js/91.9b127be7.js"><link rel="prefetch" href="/web-html/assets/js/92.bb41ffda.js"><link rel="prefetch" href="/web-html/assets/js/93.7d73e1d7.js"><link rel="prefetch" href="/web-html/assets/js/94.c7b499ba.js"><link rel="prefetch" href="/web-html/assets/js/95.884ac34b.js"><link rel="prefetch" href="/web-html/assets/js/96.947b3319.js"><link rel="prefetch" href="/web-html/assets/js/97.674cfe22.js"><link rel="prefetch" href="/web-html/assets/js/98.3c5e0843.js"><link rel="prefetch" href="/web-html/assets/js/99.b894ef11.js"><link rel="prefetch" href="/web-html/assets/js/vendors~flowchart.b4c434b0.js">
    <link rel="stylesheet" href="/web-html/assets/css/0.styles.be4d0a8b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-html/" class="home-link router-link-active"><!----> <span class="site-name">html学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title">html</span> <span class="arrow down"></span></button> <button type="button" aria-label="html" class="mobile-dropdown-title"><span class="title">html</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-html/1.base/1.html/1.index.html" class="nav-link">
  一.html基础
</a></li><li class="dropdown-item"><!----> <a href="/web-html/1.base/2.html/1.index.html" class="nav-link">
  二.html媒体
</a></li><li class="dropdown-item"><!----> <a href="/web-html/1.base/3.html/1.index.html" class="nav-link">
  三.dom对象
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html5" class="dropdown-title"><span class="title">html5</span> <span class="arrow down"></span></button> <button type="button" aria-label="html5" class="mobile-dropdown-title"><span class="title">html5</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/1.h5/1.index.html" class="nav-link">
  一.h5开发
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/2.js/1.index.html" class="nav-link">
  二.html5
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/3.type/1.index.html" class="nav-link">
  三.移动端
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/6.canvas/1.index.html" class="nav-link">
  四.canvas案例
</a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-html" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title">html</span> <span class="arrow down"></span></button> <button type="button" aria-label="html" class="mobile-dropdown-title"><span class="title">html</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-html/1.base/1.html/1.index.html" class="nav-link">
  一.html基础
</a></li><li class="dropdown-item"><!----> <a href="/web-html/1.base/2.html/1.index.html" class="nav-link">
  二.html媒体
</a></li><li class="dropdown-item"><!----> <a href="/web-html/1.base/3.html/1.index.html" class="nav-link">
  三.dom对象
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html5" class="dropdown-title"><span class="title">html5</span> <span class="arrow down"></span></button> <button type="button" aria-label="html5" class="mobile-dropdown-title"><span class="title">html5</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/1.h5/1.index.html" class="nav-link">
  一.h5开发
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/2.js/1.index.html" class="nav-link">
  二.html5
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/3.type/1.index.html" class="nav-link">
  三.移动端
</a></li><li class="dropdown-item"><!----> <a href="/web-html/2.advanced/6.canvas/1.index.html" class="nav-link">
  四.canvas案例
</a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-html" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/web-html/2.advanced/1.h5/1.index.html" class="sidebar-link">H5 开发概述</a></li><li><a href="/web-html/2.advanced/1.h5/1.html" class="sidebar-link">一.基础页面开发</a></li><li><a href="/web-html/2.advanced/1.h5/2.html" class="sidebar-link">一.让它动起来</a></li><li><a href="/web-html/2.advanced/1.h5/3.html" class="sidebar-link">二.3D</a></li><li><a href="/web-html/2.advanced/1.h5/4.html" class="sidebar-link">三.补间动画</a></li><li><a href="/web-html/2.advanced/1.h5/5.html" aria-current="page" class="active sidebar-link">四.逐帧动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#什么是逐帧动画" class="sidebar-link">什么是逐帧动画</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#逐帧动画的前端实现方案" class="sidebar-link">逐帧动画的前端实现方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#_1-直接使用-gif" class="sidebar-link">1\. 直接使用 GIF</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#_2-使用-javascript-控制动画播放" class="sidebar-link">2\. 使用 JavaScript 控制动画播放</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#_3-使用-canvas-及相关库" class="sidebar-link">3\. 使用 Canvas 及相关库</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#_4-使用-css3-阶梯函数-steps-number-of-steps-direction" class="sidebar-link">4\. 使用 CSS3 阶梯函数 steps(number_of_steps, direction)</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#案例实战-1-利用-css3-实现逐帧动画" class="sidebar-link">案例实战 1 - 利用 CSS3 实现逐帧动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#步骤-1-将动画帧合并为雪碧图" class="sidebar-link">步骤 1 - 将动画帧合并为雪碧图</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#步骤-2-元素定位并设置背景" class="sidebar-link">步骤 2 - 元素定位并设置背景</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#步骤-3-使用-steps-实现动画播放" class="sidebar-link">步骤 3 - 使用 steps 实现动画播放</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#css3-逐帧动画的一些技巧" class="sidebar-link">CSS3 逐帧动画的一些技巧</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#案例实战-2-利用-canvas-做一个会动的京东-joy" class="sidebar-link">案例实战 2 - 利用 Canvas 做一个会动的京东 JOY</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#步骤-1-准备动画帧所需的雪碧图" class="sidebar-link">步骤 1 - 准备动画帧所需的雪碧图</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#步骤-2-实现动画" class="sidebar-link">步骤 2 - 实现动画</a></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#相关资源下载" class="sidebar-link">相关资源下载</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-html/2.advanced/1.h5/5.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/web-html/2.advanced/1.h5/6.html" class="sidebar-link">五.SVG 动画</a></li><li><a href="/web-html/2.advanced/1.h5/7.html" class="sidebar-link">六.动效之效</a></li><li><a href="/web-html/2.advanced/1.h5/8.html" class="sidebar-link">七.滑屏应用开发</a></li><li><a href="/web-html/2.advanced/1.h5/9.html" class="sidebar-link">八.基础页面开发</a></li><li><a href="/web-html/2.advanced/1.h5/10.html" class="sidebar-link">九.响应式页面开发</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="四-逐帧动画"><a href="#四-逐帧动画" class="header-anchor">#</a> 四.逐帧动画</h1> <p>前一小节我们花了很大的篇幅去讲解「补间动画」的开发，除了因为它最常见，还因为其中间的许多实现思路（如「动效的审查与分解」、「基于 AE 动效稿还原动画」）同样适用于本小节将要介绍的另一种常见的基础动画形式 —— 「逐帧动画」。</p> <h2 id="什么是逐帧动画"><a href="#什么是逐帧动画" class="header-anchor">#</a> 什么是逐帧动画</h2> <p>逐帧动画的英文名字是 Frame-By-Frame Animation，其在维基百科中有如下定义：</p> <blockquote><p>定格动画，又名逐帧动画，是一种动画技术，其原理即将每帧不同的图像连续播放，从而产生动画效果。</p></blockquote> <p>简而言之，逐帧动画有两个要素：</p> <p>（1）相关联的不同图像，即动画帧<br>
（2）连续播放</p> <p>逐帧动画最经典的例子，莫过于手翻书了。动画帧绘制在书本的不同页上，通过手动翻页来实现连续播放：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bde4366d4d605?w=480&amp;h=270&amp;f=gif&amp;s=7498666" alt="逐帧动画"></p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bde4c9494ca83?w=500&amp;h=281&amp;f=gif&amp;s=943006" alt="逐帧动画"></p> <p><em>（图片来源：<a href="http://blog.sina.com.cn/s/blog_67157b2a0102vcx3.html" target="_blank" rel="noopener noreferrer">《一起翻一翻，手翻书的前世今生》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</em></p> <h2 id="逐帧动画的前端实现方案"><a href="#逐帧动画的前端实现方案" class="header-anchor">#</a> 逐帧动画的前端实现方案</h2> <p>在细聊 CSS3 逐帧动画之前，我们先了解下前端实现逐帧动画的几种方案。</p> <h3 id="_1-直接使用-gif"><a href="#_1-直接使用-gif" class="header-anchor">#</a> 1. 直接使用 GIF</h3> <p>GIF 可以有多个动画帧，连续播放是其自身属性，是否循环也是由其本身决定的。</p> <p>GIF 往往用来实现小细节动画，成本较低、使用方便、兼容性好，但同时也存在画质低、交互不灵活等问题。</p> <h3 id="_2-使用-javascript-控制动画播放"><a href="#_2-使用-javascript-控制动画播放" class="header-anchor">#</a> 2. 使用 JavaScript 控制动画播放</h3> <p>将动画帧合并成雪碧图，放到 <code>background-image</code> 中，通过 JavaScript 改变 <code>background-position</code> 的值来实现动画的播放。</p> <p>使用 JavaScript 实现逐帧动画，兼容性佳，且交互灵活。</p> <h3 id="_3-使用-canvas-及相关库"><a href="#_3-使用-canvas-及相关库" class="header-anchor">#</a> 3. 使用 Canvas 及相关库</h3> <p>将动画帧绘制到 Canvas 上，通过不断地重绘即可实现逐帧动画。<a href="https://www.createjs.com/" target="_blank" rel="noopener noreferrer">CreateJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="http://pixijs.com" target="_blank" rel="noopener noreferrer">Pixi.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等库都提供了成熟的方案。</p> <p>使用 Canvas 可以利用硬件加速，功能强大，操作灵活，有丰富的类库，但学习成本较高，且老式浏览器不兼容 Canvas。</p> <h3 id="_4-使用-css3-阶梯函数-steps-number-of-steps-direction"><a href="#_4-使用-css3-阶梯函数-steps-number-of-steps-direction" class="header-anchor">#</a> 4. 使用 CSS3 阶梯函数 <code>steps(number_of_steps, direction)</code></h3> <p>CSS3 使用 <code>animation-timing-function</code> 的阶梯函数 <code>steps(number_of_steps, direction)</code> 来实现逐帧动画。</p> <blockquote><p>在实际工作过程中，开发「逐帧动画」最为常见的两种方式是第 3 和 4 种，CSS3 Animation 兼容性良好，相对于 JavaScript，CSS3 逐帧动画使用简单，且开发效率更高；而 Canvas 因为其性能优势，帧与帧之间切换的衔接度更高，适合实现帧数或尺寸（宽高）较大的逐帧动画。</p></blockquote> <h2 id="案例实战-1-利用-css3-实现逐帧动画"><a href="#案例实战-1-利用-css3-实现逐帧动画" class="header-anchor">#</a> 案例实战 1 - 利用 CSS3 实现逐帧动画</h2> <p>与使用 JavaScript 实现相同，通过 CSS3 实现逐帧动画时，也是将动画帧放到 <code>background-image</code> 中。</p> <p>逐帧动画往往有多个不同的动画帧，可以直接通过更改 <code>background-image</code> 的值实现帧的切换，但多个图片文件会带来多个 HTTP 请求，且不利于文件的管理。</p> <p>比较妥当的做法是，将所有的动画帧合并成一张雪碧图（sprite），通过改变 <code>background-position</code> 的值来实现动画帧切换。因此，逐帧动画也被称为“精灵动画（sprite animation）”。</p> <p>下面以京东到家的触屏页面<a href="http://jdc.jd.com/fd/promote/201601/djnianhuo/" target="_blank" rel="noopener noreferrer">《年货送到家》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的一个场景为例，为大家讲解如何利用 CSS3 来实现逐帧动画。</p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdf0064d07c2b?w=260&amp;h=254&amp;f=gif&amp;s=16600" alt="最终效果"></p> <h3 id="步骤-1-将动画帧合并为雪碧图"><a href="#步骤-1-将动画帧合并为雪碧图" class="header-anchor">#</a> 步骤 1 - 将动画帧合并为雪碧图</h3> <p>动画帧的合并方法有很多，可以使用图片处理软件、在线雪碧图工具、自动化脚本等。这里将介绍 Photoshop 中的操作。</p> <ol><li>准备好需要合并的动画帧，这里使用的动画帧尺寸为 200 x 206</li></ol> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bde8f28c95485?w=575&amp;h=360&amp;f=png&amp;s=83213" alt="动画帧"></p> <ol start="2"><li>打开 Photoshop - 文件 - 自动 - 联系表 II，选取所有动画帧，设置文档尺寸，注意红框部分取消勾选</li></ol> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdea096ca7b71?w=696&amp;h=787&amp;f=png&amp;s=128002" alt="动画帧"></p> <ol start="3"><li>背景图层不可见，导出雪碧图并命名为 p8.png</li></ol> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdeab78d69a82?w=292&amp;h=378&amp;f=png&amp;s=26077" alt="动画帧"></p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdeb499e492c3?w=1096&amp;h=852&amp;f=png&amp;s=209765" alt="动画帧"></p> <p>此时，我们可以得到如下的雪碧图 p8.png：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdebc05d489f4?w=465&amp;h=525&amp;f=png&amp;s=75943" alt="雪碧图"></p> <h3 id="步骤-2-元素定位并设置背景"><a href="#步骤-2-元素定位并设置背景" class="header-anchor">#</a> 步骤 2 - 元素定位并设置背景</h3> <p>元素的尺寸需与动画帧的尺寸相同/等比例，将雪碧图放到元素的 <code>background-image</code> 中：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.page_key {
  position: absolute;
  left: 20px;
  top: 20px;
  width: 200px;
  height: 206px;
  background-image: url(&quot;../img/p8.png&quot;);
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="步骤-3-使用-steps-实现动画播放"><a href="#步骤-3-使用-steps-实现动画播放" class="header-anchor">#</a> 步骤 3 - 使用 <code>steps</code> 实现动画播放</h3> <p>通过查看 W3C 文档，可知 <code>steps(number_of_steps, direction)</code> 指定了一个阶梯函数，包含两个参数：</p> <ul><li>第一个参数指定了函数中的间隔数量（必须是正整数）</li> <li>第二个参数可选，指定在每个间隔的起点或是终点发生阶跃变化，接受 <code>start</code> 和 <code>end</code> 两个值，默认为 <code>end</code></li></ul> <p>可以通过下图更深入地理解 <code>steps</code> 函数：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bded1cb1b7ee3?w=507&amp;h=517&amp;f=png&amp;s=11321" alt="steps函数"></p> <p><em>（图片来源：<a href="https://www.w3.org/TR/css3-transitions/" target="_blank" rel="noopener noreferrer">W3C<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</em></p> <p>我们可以通过两种写法来实现例子中的逐帧动画，下面是第一种写法。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 写法一 */
.page_key {
  animation: p8 steps(1,end) 1.5s infinite;
}
@keyframes p8 {
  0% {background-position: 0 0;}
  33.33333% {background-position: 0 -206px;}
  66.66667% {background-position: 0 -412px;}
  100% {background-position: 0 -618px;}
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这里可能有读者疑惑，<code>steps</code> 的第一个参数为什么是 1？</p> <p>前文中提到，<code>steps</code> 是 <code>animation-timing-function</code> 的一个属性值，在 <a href="https://www.w3.org/TR/css3-animations/#animation-timing-function-property" target="_blank" rel="noopener noreferrer">W3C<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中有如下说明：</p> <blockquote><p>For a keyframed animation, the ‘animation-timing-function’ applies between keyframes, not over the entire animation.</p></blockquote> <p>也就是说，<code>animation-timing-function</code> 应用于两个关键帧（状态）之间，而非整个动画。在上面的 <code>keyframes</code> 中，我们已经把每个关键帧都写出来了，所以两个关键帧之间的间隔是 1。</p> <p>既然 <code>steps</code> 第一个参数是指函数的间隔数量，那么我们就可以把 <code>keyframes</code> 的计算直接交给 <code>steps</code> 来完成。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 写法二 */
.page_key{
  animation: p8 steps(3,end) 1.5s infinite;
}
@keyframes p8 {
  100% {background-position: 0 -618px;}
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上述两种写法最终的动画效果是相同的：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/2/22/161bdf0064d07c2b?w=260&amp;h=254&amp;f=gif&amp;s=16600" alt="最终效果"></p> <p>至此，我们便实现了一个简单的 CSS3 逐帧动画，点击<a href="http://jdc.jd.com/h5/daojia-demo/" target="_blank" rel="noopener noreferrer">查看 DEMO<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或扫描二维码：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/3/14/16224d442f9f2799?w=280&amp;h=280&amp;f=png&amp;s=1534" alt="《年货送到家》"></p> <p><em><a href="http://jdc.jd.com/h5/daojia-demo/" target="_blank" rel="noopener noreferrer">（京东年货到家逐帧动画 DEMO）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p> <h3 id="css3-逐帧动画的一些技巧"><a href="#css3-逐帧动画的一些技巧" class="header-anchor">#</a> CSS3 逐帧动画的一些技巧</h3> <p>CSS3 实现逐帧动画虽然简单，但也不乏技巧。</p> <h4 id="_1-step-start-与-step-end"><a href="#_1-step-start-与-step-end" class="header-anchor">#</a> 1. <code>step-start</code> 与 <code>step-end</code></h4> <p>除了 <code>steps</code> 函数，<code>animation-timing-function</code> 还有两个与逐帧动画相关的属性值 <code>step-start</code> 与 <code>step-end</code>。</p> <ul><li><code>step-start</code> 等同于 <code>steps(1, start)</code>：动画执行时以开始端点为开始。</li> <li><code>step-end</code> 等同于 <code>steps(1, end)</code>：动画执行时以结尾端点为开始。</li></ul> <h4 id="_2-使用-sass-完成动画帧的计算"><a href="#_2-使用-sass-完成动画帧的计算" class="header-anchor">#</a> 2. 使用 Sass 完成动画帧的计算</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 写法一 */
@mixin frame($frameNum, $frameHeight) {
  @for $i from 0 through $frameNum {
    #{100/$frameNum*$i}% {background-position: 0 #{-$i*$frameHeight}px;}
  }
}
/* 写法二 */
@mixin frame($frameNum, $frameHeight) {
  100% {background-position: 0 #{-$frameNum*$frameHeight}px;}
}

@keyframes p8 {
  @include frame($frameNum: 3, $frameHeight: 206)
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_3-移动端使用-rem-配合-scale-适配-防止动画抖动"><a href="#_3-移动端使用-rem-配合-scale-适配-防止动画抖动" class="header-anchor">#</a> 3. 移动端使用 rem 配合 scale 适配，防止动画抖动</h4> <p>我们知道，<code>rem</code> 的计算会存在误差，因此使用雪碧图时我们并不推荐用 <code>rem</code>。</p> <p>如果是逐帧动画的话，由于计算的误差，可能会出现动画抖动的情况。</p> <p>为了解决这个问题，可以参考以下的适配思路：</p> <ul><li>非逐帧动画部分，使用 <code>rem</code> 做单位</li> <li>逐帧动画部分，使用 <code>px</code> 做单位，再结合 JavaScript 对动画部分使用 <code>scale</code> 进行缩放</li></ul> <p>另外也可以通过 SVG 来解决抖动的问题，有兴趣可移步<a href="https://aotu.io/notes/2017/08/14/fix-sprite-anim/" target="_blank" rel="noopener noreferrer">《CSS 技巧：逐帧动画抖动解决方案》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 做进一步的了解。</p> <h2 id="案例实战-2-利用-canvas-做一个会动的京东-joy"><a href="#案例实战-2-利用-canvas-做一个会动的京东-joy" class="header-anchor">#</a> 案例实战 2 - 利用 Canvas 做一个会动的京东 JOY</h2> <p>CSS3 实现的逐帧动画，如果它的帧数较多或尺寸较大时，移动端可能会存在渲染性能问题，此时建议改用 Canvas 实现。 相对于 CSS3 来说，Canvas 具有更高的学习成本，所以实际项目中推荐使用业务成熟的 Canvas 动画库，如 <a href="https://www.createjs.com/" target="_blank" rel="noopener noreferrer">CreateJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="http://pixijs.com" target="_blank" rel="noopener noreferrer">Pixi.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等。</p> <p>下面我们以 <a href="https://h5.m.jd.com/dev/oj4d4FHfrtsP4tqT7ukC9spRX85/index.html" target="_blank" rel="noopener noreferrer">「京东 JOY 福星会场 一一 八仙乐游记」<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的其中一个动画为例，为大家讲解如何利用 Canvas 实现逐帧动画。</p> <p><img src="https://user-gold-cdn.xitu.io/2018/3/14/162239dec61fe32a?w=320&amp;h=320&amp;f=gif&amp;s=869595" alt="上图"></p> <h3 id="步骤-1-准备动画帧所需的雪碧图"><a href="#步骤-1-准备动画帧所需的雪碧图" class="header-anchor">#</a> 步骤 1 - 准备动画帧所需的雪碧图</h3> <p>在前面的案例中我们介绍了通过 Photoshop 手动合成雪碧图的方式，这里我们使用 <a href="https://www.codeandweb.com/texturepacker" target="_blank" rel="noopener noreferrer">TexturePacker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 工具（付费软件，帧动画开发利器，值得购买）来更快地完成同样的事情。</p> <p><img src="https://user-gold-cdn.xitu.io/2018/3/14/16223774fc46a5c7?w=2000&amp;h=1362&amp;f=png&amp;s=455019" alt="TexturePacker 用户界面"></p> <p><em>（TexturePacker 用户界面）</em></p> <p><a href="https://www.codeandweb.com/texturepacker" target="_blank" rel="noopener noreferrer">TexturePacker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 导出雪碧图的步骤如下：</p> <ol><li>将逐帧动画所有帧拖到 TexturePacker</li> <li>选择逐帧动画的渲染载体（标记1）</li> <li>根据需要设置其余配置，如：当雪碧图超过 1 张时，请选择 <code>Multipack</code> 选项（标记2）</li> <li>点击 Publish sprite sheet（标记4）即可导出雪碧图和相应渲染载体的数据（若有）</li></ol> <p>预览逐帧动画的步骤：</p> <ol><li><p>选择所有帧</p> <p>选择左侧 Sprites 面板其中一帧，然后按 Cmd/Ctrl + A 全选所有帧；或者拖拽选择所有帧。</p></li> <li><p>点击 Anim preview（标记3）</p> <p>如果我们选了渲染载体为 <strong>EaselJS / CreateJS</strong>， 其导出的 JSON 文件如下：</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;images&quot;: [
    &quot;hxr-0.png&quot;,
    &quot;hxr-1.png&quot;,
    &quot;hxr-2.png&quot;,
    &quot;hxr-3.png&quot;,
    &quot;hxr-4.png&quot;,
    &quot;hxr-5.png&quot;
  ],

  &quot;framerate&quot;: 20,
  &quot;frames&quot;: [
    [1, 1, 519, 535, 0, -109, -499],
    [522, 1, 514, 538, 0, -108, -499],
    [1, 538, 514, 538, 0, -109, -499],
    ...
  ],

  &quot;animations&quot;: {
    &quot;花想容&quot;: { &quot;frames&quot;: [45, 34, 36, 39, 41, 42, 43, 27, 44, 15, 30, 16, 17, 18, 21, 23, 24, 9, 12, 14, 19, 1, 2, 4, 5, 7, 10, 11, 13, 20, 31, 22, 25, 35, 28, 29, 32, 37, 38, 40, 33, 26, 8, 6, 0, 3] }
  },

  &quot;texturepacker&quot;: [
    &quot;SmartUpdateHash: $TexturePacker:SmartUpdate:d81882f9ddc9b1a6b4cc21c262ac0125:4ebba912052ed522502e73edaa8a5333:c8130f68479de7028295f1ccf1a4ea15$&quot;,
    &quot;Created with TexturePacker (https://www.codeandweb.com/texturepacker) for EaselJS&quot;
  ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><a href="https://www.codeandweb.com/texturepacker" target="_blank" rel="noopener noreferrer">TexturePacker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 除了生成雪碧图，其导出的 JSON 文件其实还包含了逐帧动画所需的运行数据，只需结合渲染载体的相应 API 即可快速实现逐帧动画。</p> <h3 id="步骤-2-实现动画"><a href="#步骤-2-实现动画" class="header-anchor">#</a> 步骤 2 - 实现动画</h3> <p>以 CreateJS 为例。</p> <p>准备 HTML:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;canvas id=&quot;hxr-canvas&quot; width=&quot;526&quot; height=&quot;536&quot;&gt;&lt;/canvas&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>准备 CreateJS 代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var hxrCanvas = document.getElementById(&quot;hxr-canvas&quot;)
var hxrStage = new createjs.Stage(hxrCanvas)

// 将上 JSON 数据进行修改：如 &quot;images&quot; 和 &quot;animations&quot; 字段
var spriteSheet = new createjs.SpriteSheet({
  &quot;images&quot;: [
    preload.getResult('hxr0'),
    preload.getResult('hxr1'),
    preload.getResult('hxr2'),
    preload.getResult('hxr3'),
    preload.getResult('hxr4'),
    preload.getResult('hxr5'),
  ],

  &quot;framerate&quot;: 20,
  &quot;frames&quot;: [
    [1, 1, 519, 535, 0, -109, -499],
    [522, 1, 514, 538, 0, -108, -499],
    [1, 538, 514, 538, 0, -109, -499],
    ...
  ],

  &quot;animations&quot;: {
    &quot;play&quot;: { &quot;frames&quot;: [45, 34, 36, 39, 41, 42, 43, 27, 44, 15, 30, 16, 17, 18, 21, 23, 24, 9, 12, 14, 19, 1, 2, 4, 5, 7, 10, 11, 13, 20, 31, 22, 25, 35, 28, 29, 32, 37, 38, 40, 33, 26, 8, 6, 0, 3] }
  },
})

hxrSprite = new createjs.Sprite(spriteSheet)
hxrSprite.x = 0
hxrSprite.y = 0
hxrStage.addChild(hxrSprite)
hxrSprite.gotoAndPlay(&quot;play&quot;) // 播放指定的动作 &quot;play&quot;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>这样即可完成一个逐帧动画，<a href="https://h5.m.jd.com/dev/22Vp3Q5pX2rvuPwDYeDWjPoF3Ahf/index.html" target="_blank" rel="noopener noreferrer">点击体验 DEMO<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，或扫描二维码：</p> <p><img src="https://user-gold-cdn.xitu.io/2018/3/14/16223a3039225360?w=280&amp;h=280&amp;f=png&amp;s=2021" alt="Canvas 逐帧动画 DEMO"></p> <p><em><a href="https://h5.m.jd.com/dev/22Vp3Q5pX2rvuPwDYeDWjPoF3Ahf/index.html" target="_blank" rel="noopener noreferrer">（ Canvas 逐帧动画 DEMO ）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p> <h3 id="相关资源下载"><a href="#相关资源下载" class="header-anchor">#</a> 相关资源下载</h3> <ul><li><a href="http://omwfrl50f.bkt.clouddn.com/xiaocezi/frame.zip" target="_blank" rel="noopener noreferrer">逐帧动画源文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（用于 TexturePacker 合成）</li> <li><a href="http://omwfrl50f.bkt.clouddn.com/xiaocezi/hxr.zip" target="_blank" rel="noopener noreferrer">TexturePacker 导出后的文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（适用于未购买 TexturePacker 的读者）</li> <li><a href="https://coding.net/u/Jcc/p/canvas-sprite/git?public=true" target="_blank" rel="noopener noreferrer">案例 2 完整项目源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>本小节结合案例为大家讲解了两种最为常见的逐帧动画实现方案：「基于 CSS3 Animation 实现逐帧动画」和「基于 Canvas 实现逐帧动画」。考虑到 Canvas 的方案需要引入第三方的脚本库（以 CreateJS 为例，引入的脚本库体积大小在 190 多 KB，GZIP 后仍然有 50 多 KB），在实际工作过程中，应尽量使用 CSS3 来实现逐帧动画，当 CSS3 实现的逐帧动画出现性能体验问题（或预估到会有此类问题）时，再考虑使用 Canvas 的实现方案。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhoubichuan/web-html/edit/master/src/2.advanced/1.h5/5.md" target="_blank" rel="noopener noreferrer">在github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">6/11/2024, 4:12:16 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-html/2.advanced/1.h5/4.html" class="prev">
        三.补间动画
      </a></span> <span class="next"><a href="/web-html/2.advanced/1.h5/6.html">
        五.SVG 动画
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-html/assets/js/app.1a892b65.js" defer></script><script src="/web-html/assets/js/3.cc719f0c.js" defer></script><script src="/web-html/assets/js/83.d5a8006f.js" defer></script><script src="/web-html/assets/js/6.f0aa3d22.js" defer></script>
  </body>
</html>
